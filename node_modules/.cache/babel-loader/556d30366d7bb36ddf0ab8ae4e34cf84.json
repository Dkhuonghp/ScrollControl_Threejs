{"ast":null,"code":"import _objectSpread from \"/Users/khuong/Desktop/ReactJS/scrollcontrols-gltf/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n\nvar _jsxFileName = \"/Users/khuong/Desktop/ReactJS/scrollcontrols-gltf/src/App.js\",\n    _s = $RefreshSig$();\n\nimport * as THREE from 'three';\nimport { Suspense, useEffect, useLayoutEffect } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { ScrollControls, Sky, useScroll, useGLTF, useAnimations } from '@react-three/drei';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(Canvas, {\n    dpr: [1, 2],\n    shadows: true,\n    camera: {\n      position: [0, 0, 10],\n      near: 0.1,\n      far: 1000\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"ambientLight\", {\n      intensity: 0.03\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"fog\", {\n      attach: \"fog\",\n      args: ['#ff5020', 5, 18]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"spotLight\", {\n      angle: 0.14,\n      color: \"#ffd0d0\",\n      penumbra: 1,\n      position: [25, 50, -20],\n      \"shadow-mapSize\": [2048, 2048],\n      \"shadow-bias\": -0.0001,\n      castShadow: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Sky, {\n      scale: 1000,\n      sunPosition: [2, 0.4, 10]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: null,\n      children: /*#__PURE__*/_jsxDEV(ScrollControls, {\n        pages: 3,\n        children: /*#__PURE__*/_jsxDEV(LittlestTokyo, {\n          scale: 0.02,\n          position: [0, 2.5, 0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }, this);\n}\n_c = App;\n\nfunction LittlestTokyo(_ref) {\n  _s();\n\n  var props = Object.assign({}, _ref);\n  // This hook gives you offets, ranges and other useful things\n  var scroll = useScroll();\n\n  var _useGLTF = useGLTF('/LittlestTokyo-transformed.glb'),\n      scene = _useGLTF.scene,\n      nodes = _useGLTF.nodes,\n      animations = _useGLTF.animations;\n\n  var _useAnimations = useAnimations(animations, scene),\n      actions = _useAnimations.actions;\n\n  useLayoutEffect(function () {\n    return Object.values(nodes).forEach(function (node) {\n      return node.receiveShadow = node.castShadow = true;\n    });\n  });\n  useEffect(function () {\n    return void (actions['Take 001'].play().paused = true);\n  }, [actions]);\n  useFrame(function (state, delta) {\n    var action = actions['Take 001']; // The offset is between 0 and 1, you can apply it to your models any way you like\n\n    var offset = 1 - scroll.offset;\n    action.time = THREE.MathUtils.damp(action.time, action.getClip().duration / 2 * offset, 100, delta);\n    state.camera.position.set(Math.sin(offset) * -10, Math.atan(offset * Math.PI * 2) * 5, Math.cos(offset * Math.PI / 3) * -10);\n    state.camera.lookAt(0, 0, 0);\n  });\n  return /*#__PURE__*/_jsxDEV(\"primitive\", _objectSpread({\n    object: scene\n  }, props), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 10\n  }, this);\n}\n/*\nauthor: glenatron (https://sketchfab.com/glenatron)\nlicense: CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)\nsource: https://sketchfab.com/models/94b24a60dc1b48248de50bf087c0f042\ntitle: Littlest Tokyo */\n\n\n_s(LittlestTokyo, \"Ks49jE9fT0Z8Ltvj5KwxcptFZdM=\", false, function () {\n  return [useScroll, useGLTF, useAnimations, useFrame];\n});\n\n_c2 = LittlestTokyo;\nuseGLTF.preload('/LittlestTokyo-transformed.glb');\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"LittlestTokyo\");","map":{"version":3,"names":["THREE","Suspense","useEffect","useLayoutEffect","Canvas","useFrame","ScrollControls","Sky","useScroll","useGLTF","useAnimations","App","position","near","far","LittlestTokyo","props","scroll","scene","nodes","animations","actions","Object","values","forEach","node","receiveShadow","castShadow","play","paused","state","delta","action","offset","time","MathUtils","damp","getClip","duration","camera","set","Math","sin","atan","PI","cos","lookAt","preload"],"sources":["/Users/khuong/Desktop/ReactJS/scrollcontrols-gltf/src/App.js"],"sourcesContent":["import * as THREE from 'three'\nimport { Suspense, useEffect, useLayoutEffect } from 'react'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { ScrollControls, Sky, useScroll, useGLTF, useAnimations } from '@react-three/drei'\n\nexport default function App() {\n  return (\n    <Canvas dpr={[1, 2]} shadows camera={{ position: [0, 0, 10], near: 0.1, far: 1000 }}>\n      <ambientLight intensity={0.03} />\n      <fog attach=\"fog\" args={['#ff5020', 5, 18]} />\n      <spotLight angle={0.14} color=\"#ffd0d0\" penumbra={1} position={[25, 50, -20]} shadow-mapSize={[2048, 2048]} shadow-bias={-0.0001} castShadow />\n      <Sky scale={1000} sunPosition={[2, 0.4, 10]} />\n      <Suspense fallback={null}>\n        {/* Wrap contents you want to scroll into <ScrollControls> */}\n        <ScrollControls pages={3}>\n          <LittlestTokyo scale={0.02} position={[0, 2.5, 0]} />\n\n        </ScrollControls>\n      </Suspense>\n    </Canvas>\n  )\n}\n\nfunction LittlestTokyo({ ...props }) {\n  // This hook gives you offets, ranges and other useful things\n  const scroll = useScroll()\n  const { scene, nodes, animations } = useGLTF('/LittlestTokyo-transformed.glb')\n  const { actions } = useAnimations(animations, scene)\n  useLayoutEffect(() => Object.values(nodes).forEach((node) => (node.receiveShadow = node.castShadow = true)))\n  useEffect(() => void (actions['Take 001'].play().paused = true), [actions])\n  useFrame((state, delta) => {\n    const action = actions['Take 001']\n    // The offset is between 0 and 1, you can apply it to your models any way you like\n    const offset = 1 - scroll.offset\n    action.time = THREE.MathUtils.damp(action.time, (action.getClip().duration / 2) * offset, 100, delta)\n    state.camera.position.set(Math.sin(offset) * -10, Math.atan(offset * Math.PI * 2) * 5, Math.cos((offset * Math.PI) / 3) * -10)\n    state.camera.lookAt(0, 0, 0)\n  })\n  return <primitive object={scene} {...props} />\n}\n\n/*\nauthor: glenatron (https://sketchfab.com/glenatron)\nlicense: CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)\nsource: https://sketchfab.com/models/94b24a60dc1b48248de50bf087c0f042\ntitle: Littlest Tokyo */\nuseGLTF.preload('/LittlestTokyo-transformed.glb')\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}