{"ast":null,"code":"import _slicedToArray from \"/Users/khuong/Desktop/2022/ReactJS/scrollcontrols-gltf/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"/Users/khuong/Desktop/2022/ReactJS/scrollcontrols-gltf/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"children\", \"controls\", \"shadows\", \"adjustCamera\", \"environment\", \"contactShadow\", \"intensity\", \"preset\", \"shadowBias\", \"contactShadowBlur\", \"contactShadowOpacity\"];\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\nvar presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\n\nfunction Stage(_ref) {\n  var children = _ref.children,\n      controls = _ref.controls,\n      _ref$shadows = _ref.shadows,\n      shadows = _ref$shadows === void 0 ? true : _ref$shadows,\n      _ref$adjustCamera = _ref.adjustCamera,\n      adjustCamera = _ref$adjustCamera === void 0 ? true : _ref$adjustCamera,\n      _ref$environment = _ref.environment,\n      environment = _ref$environment === void 0 ? 'city' : _ref$environment,\n      _ref$contactShadow = _ref.contactShadow,\n      contactShadow = _ref$contactShadow === void 0 ? true : _ref$contactShadow,\n      _ref$intensity = _ref.intensity,\n      intensity = _ref$intensity === void 0 ? 1 : _ref$intensity,\n      _ref$preset = _ref.preset,\n      preset = _ref$preset === void 0 ? 'rembrandt' : _ref$preset,\n      _ref$shadowBias = _ref.shadowBias,\n      shadowBias = _ref$shadowBias === void 0 ? 0 : _ref$shadowBias,\n      _ref$contactShadowBlu = _ref.contactShadowBlur,\n      contactShadowBlur = _ref$contactShadowBlu === void 0 ? 2 : _ref$contactShadowBlu,\n      _ref$contactShadowOpa = _ref.contactShadowOpacity,\n      contactShadowOpacity = _ref$contactShadowOpa === void 0 ? 0.5 : _ref$contactShadowOpa,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var config = presets[preset];\n  var camera = useThree(function (state) {\n    return state.camera;\n  }); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  var defaultControls = useThree(function (state) {\n    return state.controls;\n  });\n  var outer = React.useRef(null);\n  var inner = React.useRef(null);\n\n  var _React$useState = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      _React$useState2$ = _React$useState2[0],\n      radius = _React$useState2$.radius,\n      width = _React$useState2$.width,\n      height = _React$useState2$.height,\n      set = _React$useState2[1];\n\n  React.useLayoutEffect(function () {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    var box3 = new THREE.Box3().setFromObject(inner.current);\n    var center = new THREE.Vector3();\n    var sphere = new THREE.Sphere();\n    var height = box3.max.y - box3.min.y;\n    var width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width: width,\n      height: height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(function () {\n    if (adjustCamera) {\n      var y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      var ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, {\n    \"rotation-x\": Math.PI / 2,\n    opacity: contactShadowOpacity,\n    width: radius * 2,\n    height: radius * 2,\n    blur: contactShadowBlur,\n    far: radius / 2\n  }), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };","map":{"version":3,"names":["React","THREE","useThree","Environment","ContactShadows","presets","rembrandt","main","fill","portrait","upfront","soft","Stage","children","controls","shadows","adjustCamera","environment","contactShadow","intensity","preset","shadowBias","contactShadowBlur","contactShadowOpacity","props","config","camera","state","defaultControls","outer","useRef","inner","useState","radius","width","height","set","useLayoutEffect","current","position","updateWorldMatrix","box3","Box3","setFromObject","center","Vector3","sphere","Sphere","max","y","min","x","getCenter","getBoundingSphere","z","near","far","Math","lookAt","ctrl","target","update","createElement","ref","PI","opacity","blur","penumbra","castShadow"],"sources":["/Users/khuong/Desktop/2022/ReactJS/scrollcontrols-gltf/node_modules/@react-three/drei/core/Stage.js"],"sourcesContent":["import * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\n\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage({\n  children,\n  controls,\n  shadows = true,\n  adjustCamera = true,\n  environment = 'city',\n  contactShadow = true,\n  intensity = 1,\n  preset = 'rembrandt',\n  shadowBias = 0,\n  contactShadowBlur = 2,\n  contactShadowOpacity = 0.5,\n  ...props\n}) {\n  const config = presets[preset];\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  React.useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new THREE.Box3().setFromObject(inner.current);\n    const center = new THREE.Vector3();\n    const sphere = new THREE.Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      const ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, {\n    \"rotation-x\": Math.PI / 2,\n    opacity: contactShadowOpacity,\n    width: radius * 2,\n    height: radius * 2,\n    blur: contactShadowBlur,\n    far: radius / 2\n  }), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}